# Новостной сервис 

## Функционал

### В проекте демонстрируется:

- разработка REST API с использованием Spring MVC;
- валидация входящих запросов от клиентов;
- работа со Spring AOP;
- создание слоя приложения для работы с базой данных с использованием Spring Boot Data JPA;
- написание спецификаций для фильтрации новостей при запросе;
- маппинг сущностей с использованием MapStruct.

### API новостного сервиса предоставляет возможность:

- создавать пользователей и управлять ими;
- создавать категории новостей и управлять ими;
- создавать новости и управлять ими;
- создавать комментарии для новостей и управлять ими.

## Стек используемых технологий


- Spring Boot для создания веб-приложения;
- Spring MVC для работы с базой данных;
- Lombok для сокращения шаблонного кода;
- MapStruct для оптимизации маппинга;
- Spring AOP для внедрения дополнительного поведения без изменения основной бизнес-логики;
- Dockerfile для создания докер-образа и запуска контейнера в Docker.

## Инструкция по локальному запуску проекта

1) убедитесь, что на вашем ПК установлены IntelliJ IDEA, Docker Desktop и Postmen;
2) клонируйте код приложения из репозитория командой:
```
git clone <https://github.com/NadezhdaJavaDeveloper/newsSrevise.git>
```
3) откройте проект с помощью IntelliJ IDEA;
4) откройте терминал;
5) перейдите в папку docker `cd docker`
6) отчистите старые контейнеры и тома (если есть) `docker-compose down -v`
7) запустите контейнер командой `docker-compose up --build`;
8) приложение будет доступно: `http://localhost:8080/api`

## API-документация

### Базовые эндпоинты
| Сущность     | Метод | URL                    | Описание               |
|--------------|-------|------------------------|-----------------------|
| Пользователи | GET   | `/api/users`           | Список пользователей  |
| Категории    | POST  | `/api/categories`      | Создать категорию     |
| Новости      | GET   | `/api/news?filter=...` | Фильтрация новостей   |
| Комментарии  | DELETE| `/api/comments/{id}`   | Удалить комментарий   |

### Примеры запросов
1. Создание новости:

http://localhost:8080/api/news
UpsertNewsRequest request:
{
"categoryName": "Технологии",
"content": "Новый iPhone",
"userId": 1
}


2. Фильтрация новостей:

http://localhost:8080/api/news?categoryName=Наука&page=0&size=10

## Особенности реализации
1. **Права доступа**:
    - Редактирование/удаление новостей и комментариев доступно только их авторам (реализовано через AOP).

2. **Валидация**:
    - Проверка входящих данных (например, `@NotBlank` для обязательных полей).

3. **Пагинация**:
    - Поддержка параметров `page` и `size` .

4. **Фильтрация новостей**:
    - По категории: `/api/news?categoryName=Технологии`
    - По автору: `/api/news?userNickname=John`

5. **Обработка ошибок**:
    - Возврат структурированных ошибок в формате JSON.